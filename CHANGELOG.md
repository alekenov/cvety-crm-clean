## 2024-11-23
### Исправление цен продуктов

#### Исправлено
- Автоматический расчет цен продуктов на основе состава:
  - Базовая цена теперь корректно рассчитывается как сумма стоимости всех цветов
  - Добавлена 30% наценка к базовой цене
  - Учитывается стоимость упаковки (2000 тенге)

#### Добавлено
- Скрипт `update_product_prices.js` для обновления цен существующих продуктов
- Автоматическое обновление цен при изменении состава продукта

#### Изменено
- Обновлена логика сохранения продуктов в `AddProductForm.jsx`:
  - Добавлен расчет цены при создании нового продукта
  - Добавлен пересчет цены при редактировании существующего продукта

#### Технические детали
- Использованы ES modules вместо CommonJS в скриптах
- Добавлена обработка ошибок при обновлении цен
- Улучшено логирование процесса обновления цен

### Обновление структуры базы данных

#### Добавлено
- Колонка `updated_at` в таблицу `products`:
  - Автоматическое обновление времени при изменении продукта
  - Создан триггер для обновления `updated_at`

#### Изменено
- Структура таблицы `products`:
  - Добавлены поля для хранения цен (`price`, `base_price`, `markup_amount`)
  - Оптимизирована работа с временными метками

#### Технические детали
- Создан скрипт `fix_products_table.js` для обновления структуры базы данных
- Добавлены SQL-триггеры для автоматического обновления временных меток
- Улучшена обработка ошибок при работе с базой данных

## 2024-11-22
### Страница товаров (ProductsPage)

#### Добавлено
- Переключатель статуса товара (StatusToggle)
- Группировка товаров по статусу (активные/неактивные)
- Визуальное отличие неактивных товаров (серый цвет)

#### Изменено
- Структура данных products (группировка по статусу)
- Дизайн переключателя статуса (тогл с иконками Eye/EyeOff)
- Адаптивное отображение для мобильных устройств

#### Удалено
- Дублирующиеся файлы:
  - src/store/index 2.js
  - src/index 2.jsx
  - src/App 2.jsx

#### Технические детали
- Добавлены новые иконки из lucide-react
- Обновлены стили для активных/неактивных состояний
- Добавлена анимация для интерактивных элементов
- Оптимизирована структура компонентов

#### Следующие шаги
- [ ] Реализовать API для изменения статуса
- [ ] Добавить подтверждение при удалении
- [ ] Улучшить фильтрацию товаров

### Страница финансов (FinancePage)
#### Добавлено
- Создана мобильная версия страницы финансов
- Статистика доходов и расходов
- История финансовых операций
- Фильтрация по периодам
- Отображение способов оплаты
- Информация о чеках и операторах

#### Следующие шаги
- [ ] Адаптировать страницу для десктопа
- [ ] Добавить графики и диаграммы
- [ ] Реализовать экспорт отчетов
- [ ] Добавить фильтры по категориям и операторам

## 2024-11-21
### Система управления заказами

#### Добавлено
- Улучшена навигация между списком заказов и деталями заказа
- Добавлены тестовые данные (mockOrders) для работы без бэкенда
- Реализована улучшенная обработка ошибок и состояний загрузки
- Добавлено подробное логирование для отладки

#### Изменено
- Оптимизирована функция handleOrderClick в OrdersPage
- Улучшена обработка номеров заказов (удаление символов "№" и "–")
- Переработана логика загрузки заказов в OrderProcessing
- Обновлена структура компонентов для лучшей организации кода

#### Удалено
- Удален дублирующий файл OrderPage.jsx
- Удален неиспользуемый файл .env.local
- Удалены устаревшие конфигурационные файлы:
  - .tsconfig.json.swp
  - craco.config.js

#### Технические детали
- Улучшена обработка состояний загрузки и ошибок
- Добавлено каскадное тестирование данных (сначала mock, потом Supabase)
- Оптимизирована структура маршрутизации
- Улучшена обработка ошибок при загрузке заказов

#### Следующие шаги
- [ ] Добавить больше интерактивности в детали заказа
- [ ] Реализовать редактирование заказов
- [ ] Добавить фильтрацию и поиск в список заказов
- [ ] Интегрировать с реальной базой данных

### Компонент ProductCard

#### Исправлено
- Расчет цен в компоненте ProductCard:
  - Исправлено несоответствие имен свойств (`pricePerStem` и `price_per_stem`)
  - Улучшена логика расчета цен с проверкой обоих вариантов названий
  - Добавлена строгая валидация цен и количества
  - Исправлена обработка нулевых и неопределенных значений

#### Улучшено
- Обработка цветов в композиции:
  - Корректная работа с ID цветов из инвентаря
  - Улучшена обработка списка цветов
  - Добавлена валидация данных цветов
  - Оптимизирована производительность рендеринга

## 2024-03-05
### Исправление цен продуктов

#### Исправлено
- Автоматический расчет цен продуктов на основе состава:
  - Базовая цена теперь корректно рассчитывается как сумма стоимости всех цветов
  - Добавлена 30% наценка к базовой цене
  - Учитывается стоимость упаковки (2000 тенге)

#### Добавлено
- Скрипт `update_product_prices.js` для обновления цен существующих продуктов
- Автоматическое обновление цен при изменении состава продукта

#### Изменено
- Обновлена логика сохранения продуктов в `AddProductForm.jsx`:
  - Добавлен расчет цены при создании нового продукта
  - Добавлен пересчет цены при редактировании существующего продукта

#### Технические детали
- Использованы ES modules вместо CommonJS в скриптах
- Добавлена обработка ошибок при обновлении цен
- Улучшено логирование процесса обновления цен

## 2024-01-17
### Страница товаров (ProductsPage)

#### Добавлено
- Переключатель статуса товара (StatusToggle)
- Группировка товаров по статусу (активные/неактивные)
- Визуальное отличие неактивных товаров (серый цвет)

#### Изменено
- Структура данных products (группировка по статусу)
- Дизайн переключателя статуса (тогл с иконками Eye/EyeOff)
- Адаптивное отображение для мобильных устройств

#### Удалено
- Дублирующиеся файлы:
  - src/store/index 2.js
  - src/index 2.jsx
  - src/App 2.jsx

#### Технические детали
- Добавлены новые иконки из lucide-react
- Обновлены стили для активных/неактивных состояний
- Добавлена анимация для интерактивных элементов
- Оптимизирована структура компонентов

#### Следующие шаги
- [ ] Реализовать API для изменения статуса
- [ ] Добавить подтверждение при удалении
- [ ] Улучшить фильтрацию товаров

### Страница финансов (FinancePage)
#### Добавлено
- Создана мобильная версия страницы финансов
- Статистика доходов и расходов
- История финансовых операций
- Фильтрация по периодам
- Отображение способов оплаты
- Информация о чеках и операторах

#### Следующие шаги
- [ ] Адаптировать страницу для десктопа
- [ ] Добавить графики и диаграммы
- [ ] Реализовать экспорт отчетов
- [ ] Добавить фильтры по категориям и операторам

## 2024-01-18
### Система управления заказами

#### Добавлено
- Улучшена навигация между списком заказов и деталями заказа
- Добавлены тестовые данные (mockOrders) для работы без бэкенда
- Реализована улучшенная обработка ошибок и состояний загрузки
- Добавлено подробное логирование для отладки

#### Изменено
- Оптимизирована функция handleOrderClick в OrdersPage
- Улучшена обработка номеров заказов (удаление символов "№" и "–")
- Переработана логика загрузки заказов в OrderProcessing
- Обновлена структура компонентов для лучшей организации кода

#### Удалено
- Удален дублирующий файл OrderPage.jsx
- Удален неиспользуемый файл .env.local
- Удалены устаревшие конфигурационные файлы:
  - .tsconfig.json.swp
  - craco.config.js

#### Технические детали
- Улучшена обработка состояний загрузки и ошибок
- Добавлено каскадное тестирование данных (сначала mock, потом Supabase)
- Оптимизирована структура маршрутизации
- Улучшена обработка ошибок при загрузке заказов

#### Следующие шаги
- [ ] Добавить больше интерактивности в детали заказа
- [ ] Реализовать редактирование заказов
- [ ] Добавить фильтрацию и поиск в список заказов
- [ ] Интегрировать с реальной базой данных

### Компонент ProductCard

#### Исправлено
- Расчет цен в компоненте ProductCard:
  - Исправлено несоответствие имен свойств (`pricePerStem` и `price_per_stem`)
  - Улучшена логика расчета цен с проверкой обоих вариантов названий
  - Добавлена строгая валидация цен и количества
  - Исправлена обработка нулевых и неопределенных значений

#### Улучшено
- Обработка цветов в композиции:
  - Корректная работа с ID цветов из инвентаря
  - Улучшена обработка существующих цветов в букете
  - Добавлено корректное обновление количества цветов

#### Добавлено
- Подробное логирование для отладки:
  - Логи для отслеживания значений цен
  - Улучшенные сообщения об ошибках
  - Детальная информация о процессе расчета цен

#### Технические улучшения
- Обновлена функция `calculateFinalPrice()` для надежного расчета
- Улучшена функция `handleAddFlower()` для корректной обработки цветов
- Обновлен компонент `PriceBreakdown` для точного отображения цен
- Добавлены дополнительные проверки валидации данных

## 2024-01-18
### Стандартизация UI компонентов

#### Изменено
- Обновлены импорты с использованием алиаса `@/` во всех компонентах
- Стандартизированы кнопки в страницах:
  - Финансы (FinancePage)
  - Инвентарь (InventoryPage)
- Исправлены пути импорта компонента Input

#### Технические детали
- Заменены все кастомные кнопки на стандартный компонент `Button`
- Обновлены пути импорта с `@/components/ui/input` на `@/components/ui/Input`
- Улучшена консистентность UI элементов
- Оптимизирована структура импортов

#### Статистика изменений
- Измененные файлы: 14
- Добавлено строк: 783
- Удалено строк: 694
- Чистое изменение: +89 строк

## 2024-03-19
### Оптимизация UI компонентов и структуры проекта

#### Добавлено
- Интеграция shadcn/ui компонентов
- Новые компоненты UI с улучшенным дизайном:
  - Button
  - Badge
  - Card
  - Calendar
  - Popover
  - Select

#### Изменено
- Обновлены импорты компонентов в:
  - AnalyticsPage
  - DeliveryPage
- Улучшена структура директорий компонентов
- Оптимизирована организация layout компонентов

#### Удалено
- Устаревшие UI компоненты:
  - components/ui/Button/Button
  - components/ui/Badge/Badge
  - components/ui/Card/Card
  - components/ui/Calendar/Calendar
  - components/ui/Popover/Popover
  - components/ui/Select/Select
- Дублирующиеся layout компоненты:
  - components/layout/Sidebar.jsx

#### Технические детали
- Переход на единый стиль именования компонентов
- Обновлены пути импорта во всех затронутых файлах
- Оптимизирована структура директорий
- Улучшена организация компонентов layout

#### Следующие шаги
- [ ] Объединить Layout/Layout.jsx и MainLayout/MainLayout.jsx
- [ ] Рассмотреть объединение PageLayout с MainLayout
- [ ] Перенести MobileNavigation в features/navigation
- [ ] Провести полное тестирование UI после обновлений

## [1.2.0] - 2024-01-09
### 🚀 Новые функции

#### Редизайн карточек товаров (d826fc7)
##### Добавленные файлы (+957 строк)
- `WholesalePage.jsx` (+367 строк)
  - Внедрение адаптивной сетки товаров
  - Дизайн карточек с приоритетом мобильной версии
  - Логика взаимодействия с корзиной
  - Фильтрация и поиск товаров
  - Отображение оптовых цен

- `ProductDetails.jsx` (+272 строки)
  - Детальный просмотр товара
  - Галерея изображений
  - Спецификации товара
  - Информация о ценах
  - Функционал добавления в корзину

- `CheckoutPage.jsx` (+189 строк)
  - Реализация процесса оформления заказа
  - Варианты доставки
  - Выбор способа оплаты
  - Сводка заказа
  - Расчет итоговой суммы корзины

- `OrderConfirmationPage.jsx` (+106 строк)
  - Отображение подтверждения заказа
  - Реализация таймера оплаты
  - Сводка деталей заказа
  - Инструкции по оплате

- `index.js` (+1 строка)
  - Экспорты модуля

##### Измененные файлы
- `MobileNavigation.jsx` (4 изменения)
  - Улучшена обработка z-index
  - Исправлены проблемы с перекрытием навигации

- `router.jsx` (+20 строк)
  - Добавлены новые маршруты для оптового раздела
  - Обновлена конфигурация навигации

##### Удаленные файлы (-55 строк)
- `ClientsPage.tsx`
  - Удален устаревший TypeScript файл

### 📊 Статистика
- Всего изменено файлов: 8
- Добавлено строк: 957
- Удалено строк: 55
- Чистое изменение: +902 строки

### 🔧 Технические улучшения
1. **Оптимизация для мобильных устройств**
   - Адаптивная сетка (1/2/3/4 колонки)
   - Обработка безопасных зон для мобильных устройств
   - Интерфейс, оптимизированный для сенсорного управления

2. **Улучшения UI/UX**
   - Эффекты при наведении и переходы
   - Улучшенное взаимодействие с корзиной
   - Улучшенная визуальная иерархия
   - Оптимизированное отображение изображений

3. **Производительность**
   - Оптимизированная структура компонентов
   - Эффективное управление состоянием
   - Адаптивная загрузка изображений

4. **Организация кода**
   - Модульная структура компонентов
   - Последовательное именование файлов
   - Четкая иерархия компонентов

### 🎨 Обновления дизайна
1. **Карточки товаров**
   - Новый компактный макет
   - Улучшенная иерархия информации
   - Улучшенное отображение цен
   - Улучшенный мобильный опыт

2. **Интерактивные элементы**
   - Новые элементы управления корзиной
   - Интерфейс регулировки количества
   - Стилизация кнопок действий
   - Индикаторы состояния

### 🔍 Ключевые добавленные функции
1. **Опыт покупок**
   - Быстрое добавление в корзину
   - Обновление цен в реальном времени
   - Отображение наличия на складе
   - Обработка размера упаковки

2. **Процесс оформления заказа**
   - Оптимизированный процесс
   - Множественные варианты оплаты
   - Выбор способа доставки
   - Подтверждение заказа

## [Unreleased]
### Added
- Добавлен компонент Toast для уведомлений
- Добавлена утилита для работы с уведомлениями

### Changed
- Улучшен интерфейс настроек магазина
  - Добавлены чекбоксы для управления настройками
  - Улучшено отображение статусов (Активно/Неактивно)
  - Исправлено сохранение настроек при редактировании
  - Исправлено поведение иконки редактирования
- Обновлены компоненты для использования новой системы уведомлений:
  - ClientForm
  - FinancePage
  - InventoryPage
  - OrderProcessing
  - AddProductForm
  - ShopSettings
  - WholesalePage

### Removed
- FinancePage.module.css
- MobileNavigation.module.css

### Fixed
- Исправлена ошибка импорта CSS модулей в ProductsPage
- Обновлены все компоненты для использования только Tailwind классов